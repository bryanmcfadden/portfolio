<style>
	.modal-body { padding:10px; }
	.modal-body .item-label {
		padding-top:5px; 
		text-align:right;
	}
	.modal-body .item-label span { 
		font-size:16px;
		font-weight:bold; 
	}
	.modal-body .item { padding-left:0; }
	.modal-body .instruction { padding:5px 0 20px 0; }
	.modal-body .item i {
		 margin-left:10px;
	}
	.modal-body .browse-list { padding-bottom:20px; }
	.modal-body .browse-list-link { padding-left:0 !important; }
	.modal-body .browse-list-link div { padding:10px 0 15px 0; }
	.modal-body .browse-list-link i {
		margin-left:10px;
		color:#067ab4;
	}
	
	.modal-body .browse-list .wrapper {
		height:125px;
		padding-bottom:20px; 
	}
	.modal-body .browse-list .wrapper table tr:last-child { border-bottom:1px solid #ccc; }
	/* -------------------- version loading screen ---------------------------------- */
	.modal-body .version-loader {
		border:1px solid #ccc;
		height:140px;
	}
	.modal-body .version-loader div {
		padding-top:5%;
		text-align:center; 
	}
	.modal-body .version-loader img {
		border:none; 
		height:15px; 
		width:128px;
	}
	.modal-body .version-loader .message {
		font-weight:bold;
		padding-top:0;
		margin-top:10px; 
	}
	
	
	.modal-body .save-project-as input[type="text"] { width:100%; }
	.modal-body .save-project-as .row {  min-height:35px; }
	.modal-body .save-project-as .selector .title { 
		padding-top:5px; 
		text-align:right; 
	}
	.modal-body .save-project-as .wrapper {
		border:1px solid #ccc;
		overflow:auto; 
		overflow-y:scroll;
	}
	.modal-body .versions { padding-right:20px; }
	.modal-body .versions table tr.header { 
		background-color:#666;
		color:#fff; 
		padding-right:10px;
	}
	.modal-body .versions table th { padding:5px; }
	.modal-body .versions table th.divided { border-right:1px solid #ccc; }
	.versions table tr { border-top:1px solid #ccc; }
	.versions table tr.selected { background-color:#e7f5f9; }
	.versions table tr td:first-child { padding:5px 10px;}
	.versions table tr td { padding-left:5px; }
</style>
<script>
	$(document).ready( function() {
		$(document).on('change','.save-project-type', function() {
			if($(this).val() == 'new'){				
				$('#new').show();
				$('#existing').hide();
			}else{
				$('#existing').show();
				// TODO: add ajax simulated loading gif
				//$('#sa_version_list').hide();
				$('#new').hide();
			}
		});
		
		$(document).on('click','.browse-list .wrapper .bp-select', function() {
			var row = $(this).closest("tr");
			// clear all
			$('#master_project_list tr').each(function(index, value){
				$(this).css('background-color', 'transparent');
			})
			$(row).css('background-color', '#e7f5f9');
			var name = row.find("td").eq(1).html();
			// get name of selected and populate search input
			$('#sa_view_project_name').val(name);
			//$('#sa_view_project').trigger("click");
		});
		
		$(document).on('click','.browse-list-link span', function() {
			if($('.browse-list').hasClass("show")){	
				$('.browse-list').slideUp("fast");
				$('.browse-list').removeClass("show");
				$('.browse-list-link span').text("browse project list");
				$('.browse-list-link i').removeClass("fa-caret-up").addClass("fa-caret-down");
				$('.browse-list-link i').css("color", "#067ab4");
			}else{
				$('.browse-list').slideDown("fast");
				$('.browse-list').addClass("show");
				$('.browse-list-link span').text("hide project list");
				$('.browse-list-link i').removeClass("fa-caret-down").addClass("fa-caret-up");
				$('.browse-list-link i').css("color", "#ef6f00");
				
			}
		});
		
		$(document).on('click','.versions input[name="grp-version-type"]', function() {
			// clear all selections
			$('.versions input[name="grp-version-type"]').each(function(index, value){
				$(this).closest("tr").removeClass("selected");
			});
			$(this).closest("tr").addClass("selected");
		});
		
		$('#sa_view_project').on('click', function() {
			// simulate the loading of an AJAX call
			$('.version-data-list').hide();
			$('.version-loader').show();
			$('.version-loader').delay(3000).toggle(function(){
				$('.version-data-list').show();
			});	
		});
	});
</script>
<div class="modal-body">
	<div class="container-fluid save-project-as">
			<!-- SAVE AS EXISTING PROJECT -------------------------------- -->
			<div id="existing">
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-8 instruction">
						To view a Master Project version list, please enter a Master Project Name or ID below and select the view button. You may also
						browse the Master Project list by selecting Browse project list.
					</div>
					<div class="col-md-2"></div>
				</div>
				<div class="row">
					<div class="col-md-2">
						<div class="item-label">
							Master Project:
						</div>
					</div>
					<div class="col-md-10 item">
						<input id="sa_view_project_name" type="text" style="width:50%;" />
						<input type="button" id="sa_view_project" class="btn btn-blue" value="View" />
					</div>
				</div>
				<div class="row">
					<div class="col-md-2"></div>
					<div class="col-md-10 browse-list-link">
						<div>
							<a href="javascript:void(0);">
								<span>browse project list</span><i class="fa fa-caret-down"></i>
							</a>
						</div>
					</div>
				</div>
				<!-- -->
				<div class="browse-list" style="display:none;">
					<div class="row">
						<div class="col-md-2"></div>
						<div class="col-md-10 item">
							<div class="versions">
								<table>
									<tbody>
										<tr class="header">
											<th class="divided" style="width:10%;">Code</th>
											<th class="divided" style="width:38%;">Name</th>
											<th class="divided" style="width:20%">Est. Budget</th>
											<th style="width:21%;">Author</th>
											<th style="width:11%;"></th>
										</tr>
									</tbody>
								</table>
								<div class="wrapper">
									<table id="master_project_list">
										<tbody>
											<tr>
												<td style="width:10%;">1234221</td>
												<td style="width:40%">My Master Project Name</td>
												<td style="width:20%;">$2,000,000</td>
												<td style="width:20%;">Bryan McFadden</td>
												<td class="txtCenter" style="width:10%;">
													<a href="javascript:void(0);" class="bp-select">Select</a>
												</td>
											</tr>
											<tr>
												<td style="width:10%;">34534534</td>
												<td style="width:40%">Another Master Project Name</td>
												<td style="width:20%;">$2,000,000</td>
												<td style="width:20%;">Bryan McFadden</td>
												<td class="txtCenter" style="width:10%;">
													<a href="javascript:void(0);" class="bp-select">Select</a>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-2 item-label">
						Version Type:
					</div>
					<div class="col-md-10 item">
						<div class="versions">
							<table>
								<tbody>
									<tr class="header">
										<th class="divided" style="width:5%;"></th>
										<th class="divided" style="width:10%;">Ver</th>
										<th class="divided" style="width:19%;">Type</th>
										<th class="divided" style="width:19%">Est. Budget</th>
										<th class="divided" style="width:28%;">Author</th>
										<th class="divided" style="width:18%;">Creation Dt</th>
									</tr>
								</tbody>
							</table>
							<div class="version-loader" style="display:none;">
								<div>
									<img src="images/loading/loading_orange.gif" /><br>
									<div class="message">
										Fetching version data ...
									</div>
								</div>
							</div>
							<div class="wrapper version-data-list">
								<table>
									<tbody>
										<tr class="selected">
											<td>
												<input type="radio" name="grp-version-type" value="bare-metal" checked />
											</td>
											<td style="width:10%;">2.2</td>
											<td style="width:20%">Bare-Metal</td>
											<td style="width:20%;">$2,000,000</td>
											<td style="width:30%;">Bryan McFadden</td>
											<td style="width:15%;">8/28/2015</td>
										</tr>
										<tr>
											<td>
												<input type="radio" name="grp-version-type" value="cpfm" />
											</td>
											<td>3.0</td>
											<td>CPFM</td>
											<td>$500,000</td>
											<td>Tom Lavelle</td>
											<td>4/21/2010</td>
										</tr>
										<tr>
											<td>
												<input type="radio" name="grp-version-type" value="most-likely" />
											</td>
											<td>11.0</td>
											<td>Most Likely</td>
											<td>$972,000</td>
											<td>Michael Jones</td>
											<td>9/11/2003</td>
										</tr>
										<tr>
											<td>
												<input type="radio" name="grp-version-type" value="operational" />
											</td>
											<td>4.0</td>
											<td>Most Likely</td>
											<td>$972,000</td>
											<td>Michael Jones</td>
											<td>9/11/2003</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>
