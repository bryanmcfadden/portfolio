function phunnels(t,e){function n(t,i){headerLabel=$(t).html(),$(t).html("<span>"+headerLabel+"</span>");var e=$('<div class="filterDropdown"></div>').appendTo(t),n='<a data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-filter"></span></a>',r='<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel"></ul>';$(t).append(e),$(e).append(n),$(e).append(r),"right"==i["menu-position"]&&$(t).find(".dropdown-menu").addClass("dropdown-menu-right")}function r(t,e,n,r){var l,o;if(n.sort){for(i=0;i<n.sort.length;i++)opt=n.sort[i],opt.asc&&(l='<a class="sortASC" href="javascript:void(0);">'+opt.asc+"</a>"),opt.desc&&(o='<a class="sortDESC" href="javascript:void(0);">'+opt.desc+"</a>");l&&$(t).find(".dropdown-menu").append("<li>"+l+"</li>"),o&&$(t).find(".dropdown-menu").append("<li>"+o+"</li>"),sortASCButton=$(t).find(".sortASC"),sortASCButton.length>0&&sortASCButton.on("click",function(){r.order([e,"asc"]).draw()}),sortDESCButton=$(t).find(".sortDESC"),sortDESCButton.length>0&&sortDESCButton.on("click",function(){r.order([e,"desc"]).draw()})}}function l(t,i,e,n){if(e.search){var r='<div class="input-group"><input type="text" class="searchFilter form-control" placeholder="Search"></input><span class="input-group-btn"><button class="btn btn-default apply-filter" type="button"><span class="icon-plus"></span></button></span></div>';$(t).find(".dropdown-menu").append('<li class="searchItem separated">'+r+"</li>");var l=($(t).find(".dropdown-menu"),$(t).find(".searchItem")),o=$(t).find(".searchFilter"),a=$(t).find(".apply-filter");a.click(function(t){t.stopPropagation();var i=$.Event("keyup");i.which=13,o.trigger(i)}),o.on("keyup click",function(t){t.stopPropagation();var e=$(l).find(".filterList"),r=$(this),o=$(this).val();if(13==t.which&&o.replace(/\s/g,"").length){r.val("");var a='<a href="javascript:void(0);" class="resetFilters">Reset</a>';e.length<=0&&(l.append('<ul class="filterList"></ul>'),e=$(l).find(".filterList"),e.append('<li class="resetFilters">'+a+"</li>")),e=l.find(".filterList");var s='<a href="javascript:void(0);" class="clearFilter"><span class="icon-close"></span></a>';$('<li><span class="filterLabel">'+o+"</span>"+s+"</li>").insertBefore(e.find("li.resetFilters"))}e=l.find(".filterList"),e.find(".clearFilter").click(function(t){o=r.val(),t.stopPropagation(),$(this).parent().remove(),filterString=buildFilterString(e,o),filterCol(filterString,i,n),e.children().length<=1&&(l.find(".resetFilters").parent().remove(),e.remove())}),l.find(".resetFilters").click(function(t){t.stopPropagation(),$(e).remove(),$(this).parent().remove(),filterCol("",i,n)}),e=l.find(".filterList"),filterString=buildFilterString(e,o),filterCol(filterString,i,n)})}}otable=e.DataTable(),e.find("thead th").each(function(i){columnOptions=t[i],columnOptions&&(n(this,columnOptions),r(this,i,columnOptions,otable),l(this,i,columnOptions,otable))}),otable.on("search.dt",function(){cacheOpenChildRows(this)}),otable.on("draw.dt",function(){$(this).find("tr").each(function(){row=$(this),row.data("child-row-open")&&(childRow=$(this).data("child-row"),childRow.insertAfter(row),childRow.show())})}),$(".filterDropdown").on("hide.bs.dropdown",function(){var t="";$(this).find(".searchFilter").length>0&&(t=$(this).find(".searchFilter").val()),$(this).find(".filterList").children().length>0||t.replace(/\s/g,"").length?$(this).hasClass("filter-active")!==!0&&$(this).addClass("filter-active"):$(this).removeClass("filter-active")})}function filterCol(t,i,e){e.column(i).search(t,!0,!0).draw()}function buildFilterString(t,i){return list=$(t).children(),filters=[],list.each(function(){filters.push($(this).find(".filterLabel").text())}),""!==i&&-1==filters.indexOf(i)&&filters.push(i),filterString="(?=.*",separator=")(?=.*",filterString+=filters.join(separator),filterString+=")"}function cacheChildRows(t,i){i||(i=".child-row"),$(t+"> tbody tr").each(function(){var t=$(this),e=t.next(i);e.length>0&&t.data("child-row",e)}),$(i).remove()}function cacheOpenChildRows(t,i){i||(i=".child-row"),$(t).find("tr").each(function(){row=$(this),childRow=$(this).next(i),childRow.length>0?row.data("child-row-open",!0):row.data("child-row-open",!1)})}